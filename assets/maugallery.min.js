(function($){$.fn.mauGallery=function(a){var a=$.extend($.fn.mauGallery.defaults,a),b=[];return this.each(function(){$.fn.mauGallery.methods.createRowWrapper($(this));a.lightBox&&$.fn.mauGallery.methods.createLightBox($(this),a.lightboxId,a.navigation);$.fn.mauGallery.listeners(a);$(this).find('.gallery-item').each(function(){$.fn.mauGallery.methods.responsiveImageItem($(this));$.fn.mauGallery.methods.moveItemInRowWrapper($(this));$.fn.mauGallery.methods.wrapItemInColumn($(this),a.columns);var A=$(this).data('gallery-tag');a.showTags&&A!==void 0&&b.indexOf(A)==-1&&b.push(A)});a.showTags&&$.fn.mauGallery.methods.showItemTags($(this),a.tagsPosition,b);$(this).fadeIn(500)})};$.fn.mauGallery.defaults={columns:3,lightBox:!0,lightboxId:null,showTags:!0,tagsPosition:'bottom',navigation:!0};$.fn.mauGallery.listeners=function(_){$('.gallery-item').on('click',function(){if(_.lightBox&&$(this).prop('tagName')=='IMG')$.fn.mauGallery.methods.openLightBox($(this),_.lightboxId);else return});$('.gallery').on('click','.nav-link',$.fn.mauGallery.methods.filterByTag);$('.gallery').on('click','.mg-prev',()=>$.fn.mauGallery.methods.prevImage(_.lightboxId));$('.gallery').on('click','.mg-next',()=>$.fn.mauGallery.methods.nextImage(_.lightboxId))};$.fn.mauGallery.methods={createRowWrapper(B){!B.children().first().hasClass('row')&&B.append('<div class="gallery-items-row row"></div>')},wrapItemInColumn(c,C){if(C.constructor==Number)c.wrap(`<div class='item-column mb-4 col-${Math.ceil(12/C)}'></div>`); else if(C.constructor==Object){var _c='';C.xs&&(_c+=` col-${Math.ceil(12/C.xs)}`);C.sm&&(_c+=` col-sm-${Math.ceil(12/C.sm)}`);C.md&&(_c+=` col-md-${Math.ceil(12/C.md)}`);C.lg&&(_c+=` col-lg-${Math.ceil(12/C.lg)}`);C.xl&&(_c+=` col-xl-${Math.ceil(12/C.xl)}`);c.wrap(`<div class='item-column mb-4${_c}'></div>`)}else console.error(`Columns should be defined as numbers or objects. ${typeof C} is not supported.`)},moveItemInRowWrapper(_a){_a.appendTo('.gallery-items-row')},responsiveImageItem(d){d.prop('tagName')=='IMG'&&d.addClass('img-fluid')},openLightBox(D,_b){$(`#${_b}`).find('.lightboxImage').attr('src',D.attr('src'));$(`#${_b}`).modal('toggle')},prevImage(){let _A=null;$('img.gallery-item').each(function(){$(this).attr('src')==$('.lightboxImage').attr('src')&&(_A=$(this))});let _B=$('.tags-bar span.active-tag').data('images-toggle');let _C=[];_B=='all'?$('.item-column').each(function(){$(this).children('img').length&&_C.push($(this).children('img'))}):$('.item-column').each(function(){$(this).children('img').data('gallery-tag')==_B&&_C.push($(this).children('img'))});let _d=0;$(_C).each(function(i){$(_A).attr('src')==$(this).attr('src')&&(_d=i)});_d=!_d?_C.length-1:_d-1;next=_C[_d]||_C[_C.length-1];$('.lightboxImage').attr('src',$(null).attr('src'))},nextImage(){let e=null;$('img.gallery-item').each(function(){$(this).attr('src')==$('.lightboxImage').attr('src')&&(e=$(this))});let E=$('.tags-bar span.active-tag').data('images-toggle');let aA=[];E=='all'?$('.item-column').each(function(){$(this).children('img').length&&aA.push($(this).children('img'))}):$('.item-column').each(function(){$(this).children('img').data('gallery-tag')==E&&aA.push($(this).children('img'))});let _D=0;$(aA).each(function(i){$(e).attr('src')==$(this).attr('src')&&(_D=i)});_D=_D==aA.length-1?0:_D+1;next=aA[_D]||aA[0];$('.lightboxImage').attr('src',$(null).attr('src'))},createLightBox(aB,aC,aD){aB.append(`<div class="modal fade" id="${aC||'galleryLightbox'}" tabindex="-1" role="dialog" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            ${aD?'<div class="mg-prev" style="cursor:pointer;position:absolute;top:50%;left:-15px;background:white;"><</div>':'<span style="display:none;" />'}
                            <img class="lightboxImage img-fluid" alt="Contenu de l'image affich├®e dans la modale au clique" src=""/>
                            ${aD?'<div class="mg-next" style="cursor:pointer;position:absolute;top:50%;right:-15px;background:white}">></div>':'<span style="display:none;" />'}
                        </div>
                    </div>
                </div>
            </div>`)},showItemTags(aE,aF,aG){var aH='<li class="nav-item"><span class="nav-link active active-tag"  data-images-toggle="all">Tous</span></li>';$.each(aG,function(aI,aJ){aH+=`<li class="nav-item active">
                <span class="nav-link"  data-images-toggle="${aJ}">${aJ}</span></li>`});var _e=`<ul class="my-4 tags-bar nav nav-pills">${aH}</ul>`;aF=='bottom'?aE.append(_e):aF=='top'?aE.prepend(_e):console.error(`Unknown tags position: ${aF}`)},filterByTag(){if($(this).hasClass('active-tag'))return;$('.active-tag').removeClass('active active-tag');$(this).addClass('active active-tag');var aK=$(this).data('images-toggle');$('.gallery-item').each(function(){$(this).parents('.item-column').hide();aK=='all'?$(this).parents('.item-column').show(300):$(this).data('gallery-tag')==aK&&$(this).parents('.item-column').show(300)})}}})(jQuery);
